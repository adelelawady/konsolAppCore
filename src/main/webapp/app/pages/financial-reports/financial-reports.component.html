<div class="container-xl">
  <div class="page-header mt-3">
    <div class="row align-items-center">
      <div class="col">
        <h2 class="page-title" jhiTranslate="global.navigation.pages.financial-reports.title">Financial Dashboard</h2>
        <div class="text-muted mt-2" jhiTranslate="global.navigation.pages.financial-reports.subtitle">
          Comprehensive financial overview and analysis
        </div>
      </div>
      <div class="col-auto ms-auto d-print-none">
        <div class="btn-group">
          <button
            type="button"
            class="btn"
            [class.btn-primary]="selectedDateRange === 'today'"
            [class.btn-outline-primary]="selectedDateRange !== 'today'"
            (click)="setDateRange('today')"
            jhiTranslate="financial-reports.date-range.today"
          >
            Today
          </button>
          <button
            type="button"
            class="btn"
            [class.btn-primary]="selectedDateRange === 'week'"
            [class.btn-outline-primary]="selectedDateRange !== 'week'"
            (click)="setDateRange('week')"
            jhiTranslate="financial-reports.date-range.week"
          >
            This Week
          </button>
          <button
            type="button"
            class="btn"
            [class.btn-primary]="selectedDateRange === 'month'"
            [class.btn-outline-primary]="selectedDateRange !== 'month'"
            (click)="setDateRange('month')"
            jhiTranslate="financial-reports.date-range.month"
          >
            This Month
          </button>
          <button
            type="button"
            class="btn"
            [class.btn-primary]="selectedDateRange === 'year'"
            [class.btn-outline-primary]="selectedDateRange !== 'year'"
            (click)="setDateRange('year')"
            jhiTranslate="financial-reports.date-range.year"
          >
            This Year
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="d-flex justify-content-center mt-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!loading" class="dashboard-content">
    <!-- Key Metrics -->
    <div class="row row-deck row-cards mt-3">
      <!-- Sales Metrics -->
      <div class="col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center">
              <div class="subheader">Total Sales</div>
            </div>
            <div class="h1 mb-3">₺{{ metrics.sales.totalSales | number: '1.0-0' }}</div>
            <div class="d-flex mb-2">
              <div>Daily Revenue</div>
              <div class="ms-auto">
                <span class="text-green d-inline-flex align-items-center lh-1"> ₺{{ metrics.sales.dailyRevenue | number: '1.0-0' }} </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Net Profit -->
      <div class="col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center">
              <div class="subheader">Net Profit</div>
            </div>
            <div class="h1 mb-3">₺{{ metrics.sales.netProfit | number: '1.0-0' }}</div>
            <div class="d-flex mb-2">
              <div>Profit Margin</div>
              <div class="ms-auto">
                <span class="text-green d-inline-flex align-items-center lh-1">
                  {{ metrics.performance.netProfitMargin | number: '1.1-1' }}%
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Cash Position -->
      <div class="col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center">
              <div class="subheader">Cash Position</div>
            </div>
            <div class="h1 mb-3">₺{{ metrics.cashFlow.currentCashPosition | number: '1.0-0' }}</div>
            <div class="d-flex mb-2">
              <div>Current Ratio</div>
              <div class="ms-auto">
                <span class="text-green d-inline-flex align-items-center lh-1">
                  {{ metrics.performance.currentRatio | number: '1.2-2' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Revenue Growth -->
      <div class="col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center">
              <div class="subheader">Revenue Growth</div>
            </div>
            <div class="h1 mb-3">{{ metrics.performance.revenueGrowth | number: '1.1-1' }}%</div>
            <div class="d-flex mb-2">
              <div>Monthly Revenue</div>
              <div class="ms-auto">
                <span class="text-green d-inline-flex align-items-center lh-1">
                  ₺{{ metrics.sales.monthlyRevenue | number: '1.0-0' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="row mt-4">
      <!-- Sales Trend -->
      <div class="col-12 col-lg-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div class="chart-container" #chart></div>
          </div>
        </div>
      </div>

      <!-- Profit Distribution -->
      <div class="col-12 col-lg-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div class="chart-container" #chart></div>
          </div>
        </div>
      </div>

      <!-- Cash Flow -->
      <div class="col-12 col-lg-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div class="chart-container" #chart></div>
          </div>
        </div>
      </div>

      <!-- Bank Balance -->
      <div class="col-12 col-lg-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div class="chart-container" #chart></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
