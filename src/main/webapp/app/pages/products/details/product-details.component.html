<div class="container-fluid p-4">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Product Details -->
  <div *ngIf="product && !isLoading">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="mb-1">{{ product.name }}</h2>
        <p class="text-muted mb-0">{{ product.barcode }}</p>
      </div>
      <div>
        <button class="btn btn-outline-primary me-2" routerLink="/items">
          <fa-icon icon="arrow-left" class="me-2"></fa-icon>
          Back to Items
        </button>
      </div>
    </div>

    <!-- Basic Information -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Product Information</h5>
            <div class="mb-3">
              <label class="text-muted">Name:</label>
              <p class="mb-1">{{ product.name }}</p>
            </div>
            <div class="mb-3">
              <label class="text-muted">Code:</label>
              <p class="mb-1">{{ product.barcode }}</p>
            </div>
            <div class="mb-3">
              <label class="text-muted">Price:</label>
              <p class="mb-1">{{ product.price1 | number:'1.2-2' }}</p>
            </div>
            <div class="mb-3">
              <label class="text-muted">Cost:</label>
              <p class="mb-1">{{ product.cost | number:'1.2-2' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Data -->
      <div class="col-md-6" *ngIf="productAnalysis">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Analysis</h5>
            <div class="row g-3">
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Total Sales</h6>
                    <h4 class="mb-0">{{ productAnalysis.totalSales | number:'1.2-2' }}</h4>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Net Sales</h6>
                    <h4 class="mb-0">{{ productAnalysis.netSales | number:'1.2-2' }}</h4>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Total Profit</h6>
                    <h4 class="mb-0">{{ productAnalysis.totalProfit | number:'1.2-2' }}</h4>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Total Discounts</h6>
                    <h4 class="mb-0">{{ productAnalysis.totalDiscount | number:'1.2-2' }}</h4>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Quantity In/Out</h6>
                    <h4 class="mb-0">{{ productAnalysis.totalQtyIn | number }} / {{ productAnalysis.totalQtyOut | number }}</h4>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card bg-light">
                  <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Total Cost</h6>
                    <h4 class="mb-0">{{ productAnalysis.totalCost | number:'1.2-2' }}</h4>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 