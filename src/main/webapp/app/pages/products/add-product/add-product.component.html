<div class="modal modal-blur fade" [class.show]="show" [class.d-block]="show" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ (isEditMode ? 'products.edit' : 'products.create') | translate }}</h5>
        <button type="button" class="btn-close" (click)="close()"></button>
      </div>
      <div class="modal-body">
        <form #itemForm="ngForm" (ngSubmit)="saveItem()" *ngIf="item">
          <!-- Basic Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.basicInfo' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label required">{{ 'products.fields.name' | translate }}</label>
                  <input type="text" class="form-control" [(ngModel)]="item.name" name="name" required #name="ngModel" />
                  <div class="invalid-feedback" *ngIf="name.invalid && (name.dirty || name.touched)">
                    {{ 'products.validation.nameRequired' | translate }}
                  </div>
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.barcode' | translate }}</label>
                  <input type="text" class="form-control" [(ngModel)]="item.barcode" name="barcode" />
                </div>
              </div>
            </div>
          </div>

          <!-- Pricing Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.pricing' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label required">{{ 'products.fields.price' | translate }}</label>
                  <div class="input-group">
                    <span class="input-group-text">{{ 'currency.symbol' | translate }}</span>
                    <input
                      type="number"
                      class="form-control"
                      [(ngModel)]="item.price1"
                      name="price1"
                      required
                      min="0"
                      step="0.01"
                      #price="ngModel"
                    />
                  </div>
                  <div class="invalid-feedback" *ngIf="price.invalid && (price.dirty || price.touched)">
                    {{ 'products.validation.priceRequired' | translate }}
                  </div>
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.cost' | translate }}</label>
                  <div class="input-group">
                    <span class="input-group-text">{{ 'currency.symbol' | translate }}</span>
                    <input type="number" class="form-control" [(ngModel)]="item.cost" name="cost" min="0" step="0.01" />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Inventory Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.inventory' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.category' | translate }}</label>
                  <input type="text" class="form-control" [(ngModel)]="item.category" name="category" />
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.quantity' | translate }}</label>
                  <input type="number" class="form-control" [(ngModel)]="item.qty" name="qty" min="0" step="1" />
                </div>
                <div class="col-12">
                  <label class="form-check">
                    <input type="checkbox" class="form-check-input" [(ngModel)]="item.checkQty" name="checkQty" />
                    <span class="form-check-label">{{ 'products.fields.checkQuantity' | translate }}</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-link link-secondary" (click)="close()">
              {{ 'cancel' | translate }}
            </button>
            <button type="submit" class="btn btn-primary ms-auto" [disabled]="!itemForm.form.valid || loading">
              <i class="ti ti-device-floppy me-1" *ngIf="!loading"></i>
              <div class="spinner-border spinner-border-sm me-1" role="status" *ngIf="loading">
                <span class="visually-hidden">Loading...</span>
              </div>
              {{ 'save' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
