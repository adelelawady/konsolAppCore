<div class="modal" [class.show]="show" [style.display]="show ? 'block' : 'none'">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ (item.id ? 'products.modal.edit' : 'products.modal.add') | translate }}</h5>
        <button type="button" class="btn-close" (click)="close()"></button>
      </div>
      <div class="modal-body">
        <form #productForm="ngForm" (ngSubmit)="saveItem()">
          <!-- Basic Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.modal.sections.basic' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.name' | translate }} *</label>
                  <input
                    type="text"
                    class="form-control"
                    name="name"
                    [(ngModel)]="item.name"
                    required
                    #name="ngModel"
                    [class.is-invalid]="name.invalid && name.touched"
                  />
                  <div class="invalid-feedback" *ngIf="name.invalid && name.touched">
                    {{ 'products.validation.nameRequired' | translate }}
                  </div>
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.barcode' | translate }}</label>
                  <input type="text" class="form-control" name="barcode" [(ngModel)]="item.barcode" />
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.category' | translate }}</label>
                  <input type="text" class="form-control" name="category" [(ngModel)]="item.category" />
                </div>
              </div>
            </div>
          </div>

          <!-- Pricing Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.modal.sections.pricing' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.price' | translate }} *</label>
                  <input
                    type="text"
                    class="form-control"
                    name="price1"
                    [(ngModel)]="item.price1"
                    required
                    #price="ngModel"
                    [class.is-invalid]="price.invalid && price.touched"
                  />
                  <div class="invalid-feedback" *ngIf="price.invalid && price.touched">
                    {{ 'products.validation.priceRequired' | translate }}
                  </div>
                </div>
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.cost' | translate }}</label>
                  <input type="number" class="form-control" name="cost" [(ngModel)]="item.cost" />
                </div>
              </div>
            </div>
          </div>

          <!-- Inventory Information -->
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">{{ 'products.modal.sections.inventory' | translate }}</h3>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-sm-6">
                  <label class="form-label">{{ 'products.fields.quantity' | translate }}</label>
                  <input type="number" class="form-control" name="qty" [(ngModel)]="item.qty" />
                </div>
                <div class="col-sm-6">
                  <div class="form-check mt-4">
                    <input type="checkbox" class="form-check-input" name="checkQty" [(ngModel)]="item.checkQty" id="checkQty" />
                    <label class="form-check-label" for="checkQty">
                      {{ 'products.fields.checkQuantity' | translate }}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="close()">
          {{ 'products.modal.actions.cancel' | translate }}
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid || loading" (click)="saveItem()">
          <span class="spinner-border spinner-border-sm me-1" *ngIf="loading"></span>
          {{ (item.id ? 'products.modal.actions.update' : 'products.modal.actions.save') | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
